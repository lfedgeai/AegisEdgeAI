#!/bin/bash
# Unified-Identity - Phase 1: SPIRE API & Policy Staging (Stubbed Keylime)
# Integration test setup for sovereign attestation

set -e -o pipefail

. "${ROOTDIR}/common/common.sh"

log-info "Setting up sovereign attestation integration test..."

# Build SPIRE Server and Agent with feature flag support
log-info "Building SPIRE Server and Agent..."
cd "${REPODIR}"
go build -o "${ROOTDIR}/suites/sovereign-attestation/spire-server" ./cmd/spire-server
go build -o "${ROOTDIR}/suites/sovereign-attestation/spire-agent" ./cmd/spire-agent

log-info "Sovereign attestation test setup complete"

